server.port=${PORT:${SERVER_PORT:8457}}
spring.application.name=fake_oauth_canvas

# 1. Generic OAuth2 Provider URL
provider.base-url=${PROVIDER_BASE_URL:http://localhost:8457}

# 2. Spring Security OAuth2 Client Configuration
spring.security.oauth2.client.registration.generic.client-id=${OAUTH_CLIENT_ID:fake-client-id}
spring.security.oauth2.client.registration.generic.client-secret=${OAUTH_CLIENT_SECRET:fake-client-secret}
spring.security.oauth2.client.registration.generic.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.generic.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

# Note: The default redirect-uri template is perfect. It will resolve to /login/oauth2/code/generic

# 3. Provider-specific endpoints
spring.security.oauth2.client.provider.generic.authorization-uri=${provider.base-url}/oauth2/authorize
spring.security.oauth2.client.provider.generic.token-uri=${provider.base-url}/oauth2/token
spring.security.oauth2.client.provider.generic.user-info-uri=${provider.base-url}/userinfo
spring.security.oauth2.client.provider.generic.user-name-attribute=id

# 4. H2 Database Configuration (for token storage)
spring.datasource.url=${DATASOURCE_URL:jdbc:h2:file:./oauth2-db}
spring.datasource.username=${DATASOURCE_USERNAME:sa}
spring.datasource.password=${DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=org.h2.Driver
spring.h2.console.enabled=${H2_CONSOLE_ENABLED:true}

# 5. OAuth Access Tokens (REQUIRED from environment variables)
# OAUTH_INSTRUCTOR_ACCESS_TOKEN and OAUTH_STUDENT_ACCESS_TOKEN MUST be set via environment variables
# Other values can be overridden via environment variables or use defaults
oauth.instructor.refresh-token=${OAUTH_INSTRUCTOR_REFRESH_TOKEN:refresh-token-instructor-67890}
oauth.instructor.id=${OAUTH_INSTRUCTOR_ID:101}
oauth.instructor.name=${OAUTH_INSTRUCTOR_NAME:Kashyap Kale}

oauth.student.refresh-token=${OAUTH_STUDENT_REFRESH_TOKEN:refresh-token-student-fghij}
oauth.student.id=${OAUTH_STUDENT_ID:202}
oauth.student.name=${OAUTH_STUDENT_NAME:Sarthak Raut}

logging.level.org.springframework.security=${LOG_LEVEL:DEBUG}
